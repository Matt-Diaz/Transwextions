@using System.Globalization
@using Transwextions.App.Services.Interfaces
@using Transwextions.Data.Models

<div class="component rz-h-100 rz-overflow-hidden">
    <RadzenDataGrid TItem="TransactionModel"
                    Data="@TransactionsData"
                    AllowPaging="false"
                    AllowSorting="true"
                    Responsive="false"
                    IsLoading="@IsLoading"
                    EmptyText="No transactions yet."
                    class="rz-h-100 rz-overflow-hidden">
        <Columns>
            <RadzenDataGridColumn TItem="TransactionModel" Property="Description" Title="Details" />
            <RadzenDataGridColumn TItem="TransactionModel" Property="TransactionDate" Title="Transaction Date" Filterable="false">
                <Template Context="context">@context.TransactionDateUtc.ToString("yyyy-MM-dd")</Template>
            </RadzenDataGridColumn>

            <RadzenDataGridColumn TItem="TransactionModel" Title="Amount (USD)" Sortable="false" Filterable="false" TextAlign="TextAlign.Right">
                <Template Context="context">
                    @((context.AmountTotalCents / 100m).ToString("C", CultureInfo.GetCultureInfo("en-US")))
                </Template>
            </RadzenDataGridColumn>

            <RadzenDataGridColumn TItem="TransactionModel" Filterable="false" Sortable="false" Width="140px">
                <Template Context="context">
                    <RadzenButton Size="ButtonSize.Small" Text="View" Click="@(() => View(context))" Style="margin-right:6px" />
                    <RadzenButton Size="ButtonSize.Small" Text="Delete" ButtonStyle="ButtonStyle.Danger" Click="@(() => Delete(context))" />
                </Template>
            </RadzenDataGridColumn>
        </Columns>
    </RadzenDataGrid>
</div>